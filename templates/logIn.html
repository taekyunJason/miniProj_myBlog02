<!DOCTYPE html>

<html>

<head>
    <title>로그인 / 회원가입 폼 템플릿</title>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


</head>

<body>
    <div class="wrap">
        <div class="form-wrap">
            <div class="button-wrap">
                <div id="btn"></div>
                <button type="button" class="togglebtn" onclick="login()">LOG IN</button>
                <button type="button" class="togglebtn" onclick="register()">REGISTER</button>
            </div>

            <form id="login" action="" class="input-group">
                <input type="text" class="input-field" placeholder="Enter Nickname" required>
                <input type="password" class="input-field" placeholder="Enter Password" required>
                <input type="checkbox" class="checkbox"><span>Remember Password</span>
                <button class="submit">Login</button>
            </form>
            <form id="register" action="" class="input-group">
                <input id="inputNickname" type="text" class="input-field" placeholder="Enter your Nickname" required>
                <input id="inputEmail" type="email" class="input-field" placeholder="Enter your Email" required>
                <input id="inputPassword1" type="password" class="input-field" placeholder="Enter your Password"
                    required>
                <input id="inputPassword2" type="password" class="input-field" placeholder="Enter your Password Again"
                    required>

                <input type="checkbox" class="checkbox"><span>Terms and conditions</span>
                <button onclick="sign_up()" class="submit">REGISTER</button>
            </form>
        </div>
    </div>
    <script>
        var x = document.getElementById("login");
        var y = document.getElementById("register");
        var z = document.getElementById("btn");


        function login() {
            x.style.left = "50px";
            y.style.left = "450px";
            z.style.left = "0";
        }

        function register() {
            x.style.left = "-400px";
            y.style.left = "50px";
            z.style.left = "110px";
        }
        function sign_up() {
            const nickname = $("#inputNickname").val();
            const email = $("#inputEmail").val();
            const password1 = $("#inputPassword1").val();
            const password2 = $("#inputPassword2").val();

            console.log(nickname, email, password1, password2)
            $.ajax({
                type: "POST",
                url: "/users",
                contentType: 'application/JSON',
                data: JSON.stringify({
                    nickname: nickname,
                    email: email,
                    password: password1,
                    confirmPassword: password2,
                }),
                success: function (response) {
                    customAlert("회원가입을 축하드립니다!", function () {
                        window.location.replace("/");
                    });
                },
                error: function (error) {
                    customAlert(error.responseJSON.errorMessage);
                },
            });
        }
    </script>
</body>

</html>